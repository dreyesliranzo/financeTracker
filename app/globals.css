@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --background: 210 40% 98%;
  --foreground: 222 47% 11%;
  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --primary: 217 91% 60%;
  --primary-foreground: 210 40% 98%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222 47% 11%;
  --muted: 210 40% 96%;
  --muted-foreground: 215 16% 47%;
  --accent: 217 91% 60%;
  --accent-foreground: 210 40% 98%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 210 40% 98%;
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 217 91% 60%;
  --radius: 12px;
  --bg-glow-1: 37 99 235;
  --bg-glow-2: 14 116 144;
}

.dark {
  --background: 222 30% 7%;
  --foreground: 210 40% 98%;
  --card: 222 28% 10%;
  --card-foreground: 210 40% 98%;
  --popover: 222 28% 9%;
  --popover-foreground: 210 40% 98%;
  --primary: 217 91% 60%;
  --primary-foreground: 0 0% 100%;
  --secondary: 222 18% 16%;
  --secondary-foreground: 210 40% 98%;
  --muted: 222 16% 16%;
  --muted-foreground: 215 22% 72%;
  --accent: 217 91% 60%;
  --accent-foreground: 0 0% 100%;
  --destructive: 0 62% 50%;
  --destructive-foreground: 0 0% 100%;
  --border: 222 20% 18%;
  --input: 222 20% 18%;
  --ring: 217 91% 60%;
  --bg-glow-1: 37 99 235;
  --bg-glow-2: 14 116 144;
}

:root[data-accent="emerald"] {
  --primary: 152 76% 45%;
  --accent: 152 76% 45%;
  --ring: 152 76% 45%;
  --bg-glow-1: 16 185 129;
  --bg-glow-2: 20 184 166;
}

:root[data-accent="sunset"] {
  --primary: 20 90% 55%;
  --accent: 20 90% 55%;
  --ring: 20 90% 55%;
  --bg-glow-1: 249 115 22;
  --bg-glow-2: 236 72 153;
}

:root[data-accent="cyan"] {
  --primary: 187 86% 53%;
  --accent: 187 86% 53%;
  --ring: 187 86% 53%;
  --bg-glow-1: 34 211 238;
  --bg-glow-2: 16 185 129;
}

.dark[data-accent="emerald"] {
  --primary: 152 76% 52%;
  --accent: 152 76% 52%;
  --ring: 152 76% 52%;
  --bg-glow-1: 16 185 129;
  --bg-glow-2: 20 184 166;
}

.dark[data-accent="sunset"] {
  --primary: 24 94% 55%;
  --accent: 24 94% 55%;
  --ring: 24 94% 55%;
  --bg-glow-1: 249 115 22;
  --bg-glow-2: 244 114 182;
}

.dark[data-accent="cyan"] {
  --primary: 187 86% 58%;
  --accent: 187 86% 58%;
  --ring: 187 86% 58%;
  --bg-glow-1: 34 211 238;
  --bg-glow-2: 16 185 129;
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased min-h-screen;
    background-image: radial-gradient(1200px 600px at 20% 0%, rgb(var(--bg-glow-1) / 0.14), transparent),
      radial-gradient(800px 400px at 80% 20%, rgb(var(--bg-glow-2) / 0.12), transparent);
    background-attachment: scroll;
  }

  h1, h2, h3, h4 {
    @apply font-semibold tracking-tight;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .page-enter {
    animation: ledgerly-page-enter 240ms ease-out both;
    will-change: opacity, transform, filter;
  }

  .ledgerly-stagger {
    display: grid;
    gap: inherit;
  }

  .ledgerly-stagger-item {
    animation: ledgerly-stagger-item 220ms ease-out both;
    animation-delay: var(--d, 0ms);
    will-change: opacity, transform, filter;
  }

  .animate-fade-in {
    animation: fade-in 420ms ease-out both;
  }

  .animate-fade-in-up {
    animation: fade-in-up 480ms ease-out both;
  }

  .hover-lift {
    transition: transform 200ms ease, box-shadow 200ms ease;
  }

  .hover-lift:hover {
    transform: translateY(-2px);
  }

  .success-toast-card {
    display: flex;
    gap: 12px;
    align-items: center;
    border-radius: 14px;
    padding: 12px 14px;
    border: 1px solid hsl(var(--border));
    background: hsl(var(--card));
    box-shadow: 0 18px 40px -28px rgba(15, 23, 42, 0.65);
    width: min(380px, calc(100vw - 32px));
    animation: toast-pop 220ms ease-out both;
    cursor: pointer;
  }

  .success-toast-card:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }

  .success-ring {
    width: 36px;
    height: 36px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    background: rgba(16, 185, 129, 0.16);
    box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.25);
    flex-shrink: 0;
  }

  .success-ring-svg {
    width: 28px;
    height: 28px;
  }

  .success-ring-circle {
    fill: none;
    stroke: rgba(16, 185, 129, 0.6);
    stroke-width: 3.5;
    stroke-dasharray: 113;
    stroke-dashoffset: 113;
    animation: success-ring-draw 540ms ease-out forwards;
  }

  .success-ring-check {
    fill: none;
    stroke: #10b981;
    stroke-width: 4;
    stroke-linecap: round;
    stroke-linejoin: round;
    stroke-dasharray: 24;
    stroke-dashoffset: 24;
    animation: success-check-draw 420ms ease-out 140ms forwards;
  }

  .success-toast-text {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .success-toast-title {
    font-size: 0.92rem;
    font-weight: 600;
    color: hsl(var(--foreground));
  }

  .success-toast-description {
    font-size: 0.78rem;
    color: hsl(var(--muted-foreground));
  }

  .loading-dot {
    width: 4px;
    height: 4px;
    border-radius: 999px;
    background: currentColor;
    opacity: 0.2;
    animation: ledgerly-loading-dot 1.1s ease-in-out infinite;
  }

  .loading-dot-2 {
    animation-delay: 0.16s;
  }

  .loading-dot-3 {
    animation-delay: 0.32s;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translate3d(0, 10px, 0);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
  }
}

@keyframes toast-pop {
  from {
    opacity: 0;
    transform: translateY(6px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes success-ring-draw {
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes success-check-draw {
  to {
    stroke-dashoffset: 0;
  }
}

@keyframes ledgerly-page-enter {
  from {
    opacity: 0;
    transform: translate3d(0, 8px, 0);
    filter: blur(10px);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
  }
}

@keyframes ledgerly-stagger-item {
  from {
    opacity: 0;
    transform: translate3d(0, 6px, 0);
    filter: blur(6px);
  }
  to {
    opacity: 1;
    transform: translate3d(0, 0, 0);
    filter: blur(0);
  }
}

@keyframes ledgerly-loading-dot {
  0%,
  80%,
  100% {
    opacity: 0.2;
    transform: translateY(0);
  }
  40% {
    opacity: 1;
    transform: translateY(-2px);
  }
}

@media (prefers-reduced-motion: reduce) {
  .animate-fade-in,
  .animate-fade-in-up {
    animation: none;
  }

  .hover-lift,
  .hover-lift:hover {
    transform: none;
    transition: none;
  }

  .success-toast-card,
  .success-ring-circle,
  .success-ring-check,
  .loading-dot {
    animation: none;
    transition: none;
  }

  .page-enter,
  .ledgerly-stagger-item {
    animation: none !important;
  }
}
